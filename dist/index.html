<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Gloomyz</title><script defer="defer">(()=>{var e={183:function(e,t,n){var r,a,o;e=n.nmd(e),function(s,i,c){"use strict";var u={function:!0,object:!0},l=u[typeof t]&&t&&!t.nodeType&&t,f=u.object&&e&&!e.nodeType&&e,p=l&&f&&"object"==typeof n.g&&n.g,h=f&&f.exports===l&&l;!p||p.global!==p&&p.window!==p&&p.self,a=[t],void 0===(o="function"==typeof(r=c)?r.apply(t,a):r)||(e.exports=o),l&&h&&c(f.exports)}(0,0,(function(e){"use strict";var t,n,r,a,o;e.version="0.3.1";var s=e.defaultOptions={wait:!1,comments:!0,scope:!1,locations:!1,ranges:!1,onCreateNode:null,onCreateScope:null,onDestroyScope:null,onLocalDeclaration:null,luaVersion:"5.1",encodingMode:"none"};function i(e,t){return t=t||0,e<128?String.fromCharCode(e):e<2048?String.fromCharCode(192|t|e>>6,128|t|63&e):e<65536?String.fromCharCode(224|t|e>>12,128|t|e>>6&63,128|t|63&e):e<1114112?String.fromCharCode(240|t|e>>18,128|t|e>>12&63,128|t|e>>6&63,128|t|63&e):null}function c(e){return function(t){var n=e.exec(t);if(!n)return t;D(null,x.invalidCodeUnit,function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t}(n[0].charCodeAt(0)).toUpperCase())}}var u={"pseudo-latin1":{fixup:c(/[^\x00-\xff]/),encodeByte:function(e){return null===e?"":String.fromCharCode(e)},encodeUTF8:function(e){return i(e)}},"x-user-defined":{fixup:c(/[^\x00-\x7f\uf780-\uf7ff]/),encodeByte:function(e){return null===e?"":e>=128?String.fromCharCode(63232|e):String.fromCharCode(e)},encodeUTF8:function(e){return i(e,63232)}},none:{discardStrings:!0,fixup:function(e){return e},encodeByte:function(e){return""},encodeUTF8:function(e){return""}}},l=1,f=2,p=4,h=8,d=16,g=32,m=64,b=128,v=256;e.tokenTypes={EOF:l,StringLiteral:f,Keyword:p,Identifier:h,NumericLiteral:d,Punctuator:g,BooleanLiteral:m,NilLiteral:b,VarargLiteral:v};var x=e.errors={unexpected:"unexpected %1 '%2' near '%3'",unexpectedEOF:"unexpected symbol near '<eof>'",expected:"'%1' expected near '%2'",expectedToken:"%1 expected near '%2'",unfinishedString:"unfinished string near '%1'",malformedNumber:"malformed number near '%1'",decimalEscapeTooLarge:"decimal escape too large near '%1'",invalidEscape:"invalid escape sequence near '%1'",hexadecimalDigitExpected:"hexadecimal digit expected near '%1'",braceExpected:"missing '%1' near '%2'",tooLargeCodepoint:"UTF-8 value too large near '%1'",unfinishedLongString:"unfinished long string (starting at line %1) near '%2'",unfinishedLongComment:"unfinished long comment (starting at line %1) near '%2'",ambiguousSyntax:"ambiguous syntax (function call x new statement) near '%1'",noLoopToBreak:"no loop to break near '%1'",labelAlreadyDefined:"label '%1' already defined on line %2",labelNotVisible:"no visible label '%1' for <goto>",gotoJumpInLocalScope:"<goto %1> jumps into the scope of local '%2'",cannotUseVararg:"cannot use '...' outside a vararg function near '%1'",invalidCodeUnit:"code unit U+%1 is not allowed in the current encoding mode"},y=e.ast={labelStatement:function(e){return{type:"LabelStatement",label:e}},breakStatement:function(){return{type:"BreakStatement"}},gotoStatement:function(e){return{type:"GotoStatement",label:e}},returnStatement:function(e){return{type:"ReturnStatement",arguments:e}},ifStatement:function(e){return{type:"IfStatement",clauses:e}},ifClause:function(e,t){return{type:"IfClause",condition:e,body:t}},elseifClause:function(e,t){return{type:"ElseifClause",condition:e,body:t}},elseClause:function(e){return{type:"ElseClause",body:e}},whileStatement:function(e,t){return{type:"WhileStatement",condition:e,body:t}},doStatement:function(e){return{type:"DoStatement",body:e}},repeatStatement:function(e,t){return{type:"RepeatStatement",condition:e,body:t}},localStatement:function(e,t){return{type:"LocalStatement",variables:e,init:t}},assignmentStatement:function(e,t){return{type:"AssignmentStatement",variables:e,init:t}},callStatement:function(e){return{type:"CallStatement",expression:e}},functionStatement:function(e,t,n,r){return{type:"FunctionDeclaration",identifier:e,isLocal:n,parameters:t,body:r}},forNumericStatement:function(e,t,n,r,a){return{type:"ForNumericStatement",variable:e,start:t,end:n,step:r,body:a}},forGenericStatement:function(e,t,n){return{type:"ForGenericStatement",variables:e,iterators:t,body:n}},chunk:function(e){return{type:"Chunk",body:e}},identifier:function(e){return{type:"Identifier",name:e}},literal:function(e,t,n){return{type:e=e===f?"StringLiteral":e===d?"NumericLiteral":e===m?"BooleanLiteral":e===b?"NilLiteral":"VarargLiteral",value:t,raw:n}},tableKey:function(e,t){return{type:"TableKey",key:e,value:t}},tableKeyString:function(e,t){return{type:"TableKeyString",key:e,value:t}},tableValue:function(e){return{type:"TableValue",value:e}},tableConstructorExpression:function(e){return{type:"TableConstructorExpression",fields:e}},binaryExpression:function(e,t,n){return{type:"and"===e||"or"===e?"LogicalExpression":"BinaryExpression",operator:e,left:t,right:n}},unaryExpression:function(e,t){return{type:"UnaryExpression",operator:e,argument:t}},memberExpression:function(e,t,n){return{type:"MemberExpression",indexer:t,identifier:n,base:e}},indexExpression:function(e,t){return{type:"IndexExpression",base:e,index:t}},callExpression:function(e,t){return{type:"CallExpression",base:e,arguments:t}},tableCallExpression:function(e,t){return{type:"TableCallExpression",base:e,arguments:t}},stringCallExpression:function(e,t){return{type:"StringCallExpression",base:e,argument:t}},comment:function(e,t){return{type:"Comment",value:e,raw:t}}};function S(e){if(le){var t=fe.pop();t.complete(),t.bless(e)}return n.onCreateNode&&n.onCreateNode(e),e}var w=Array.prototype.slice,C=(Object.prototype.toString,function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1});function A(e){var t=w.call(arguments,1);return e=e.replace(/%(\d)/g,(function(e,n){return""+t[n-1]||""})),e}Array.prototype.indexOf&&(C=function(e,t){return e.indexOf(t)});var k,E,O,L,M,N,$,I,V,F,j,T=function(e){for(var t,n,r=w.call(arguments,1),a=0,o=r.length;a<o;++a)for(n in t=r[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e};function G(e){return Object.create?Object.create(e,{line:{writable:!0,value:e.line},index:{writable:!0,value:e.index},column:{writable:!0,value:e.column}}):e}function D(e){var t,n,r=A.apply(null,w.call(arguments,1));throw null===e||void 0===e.line?(n=k-I+1,(t=G(new SyntaxError(A("[%1:%2] %3",$,n,r)))).index=k,t.line=$,t.column=n):(n=e.range[0]-e.lineStart,(t=G(new SyntaxError(A("[%1:%2] %3",e.line,n,r)))).line=e.line,t.index=e.range[0],t.column=n),t}function U(e){return t.slice(e.range[0],e.range[1])||e.value}function _(e,t){D(t,x.expectedToken,e,U(t))}function B(e){var t=U(L);if(void 0!==e.type){var n;switch(e.type){case f:n="string";break;case p:n="keyword";break;case h:n="identifier";break;case d:n="number";break;case g:n="symbol";break;case m:n="boolean";break;case b:return D(e,x.unexpected,"symbol","nil",t);case l:return D(e,x.unexpectedEOF)}return D(e,x.unexpected,n,U(e),t)}return D(e,x.unexpected,"symbol",e,t)}function P(){for(z();45===t.charCodeAt(k)&&45===t.charCodeAt(k+1);)K(),z();if(k>=r)return{type:l,value:"<eof>",line:$,lineStart:I,range:[k,k]};var e,n,s,i=t.charCodeAt(k),c=t.charCodeAt(k+1);if(N=k,function(e){return e>=65&&e<=90||e>=97&&e<=122||95===e||!!(a.extendedIdentifiers&&e>=128)}(i))return function(){for(var e,n;ne(t.charCodeAt(++k)););return!function(e){switch(e.length){case 2:return"do"===e||"if"===e||"in"===e||"or"===e;case 3:return"and"===e||"end"===e||"for"===e||"not"===e;case 4:return"else"===e||"then"===e||!(!a.labels||a.contextualGoto)&&"goto"===e;case 5:return"break"===e||"local"===e||"until"===e||"while"===e;case 6:return"elseif"===e||"repeat"===e||"return"===e;case 8:return"function"===e}return!1}(e=o.fixup(t.slice(N,k)))?"true"===e||"false"===e?(n=m,e="true"===e):"nil"===e?(n=b,e=null):n=h:n=p,{type:n,value:e,line:$,lineStart:I,range:[N,k]}}();switch(i){case 39:case 34:return function(){for(var e,n=t.charCodeAt(k++),a=$,s=I,i=k,c=o.discardStrings?null:"";n!==(e=t.charCodeAt(k++));)if((k>r||Y(e))&&(c+=t.slice(i,k-1),D(null,x.unfinishedString,t.slice(N,k-1))),92===e){if(!o.discardStrings){var u=t.slice(i,k-1);c+=o.fixup(u)}var l=q();o.discardStrings||(c+=l),i=k}return o.discardStrings||(c+=o.encodeByte(null),c+=o.fixup(t.slice(i,k-1))),{type:f,value:c,line:a,lineStart:s,lastLine:$,lastLineStart:I,range:[N,k]}}();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return X();case 46:return ee(c)?X():46===c?46===t.charCodeAt(k+2)?{type:v,value:"...",line:$,lineStart:I,range:[N,k+=3]}:Z(".."):Z(".");case 61:return Z(61===c?"==":"=");case 62:return a.bitwiseOperators&&62===c?Z(">>"):Z(61===c?">=":">");case 60:return a.bitwiseOperators&&60===c?Z("<<"):Z(61===c?"<=":"<");case 126:if(61===c)return Z("~=");if(!a.bitwiseOperators)break;return Z("~");case 58:return a.labels&&58===c?Z("::"):Z(":");case 91:return 91===c||61===c?(e=$,n=I,!1===(s=W(!1))&&D(E,x.expected,"[",U(E)),{type:f,value:o.discardStrings?null:o.fixup(s),line:e,lineStart:n,lastLine:$,lastLineStart:I,range:[N,k]}):Z("[");case 47:return a.integerDivision&&47===c?Z("//"):Z("/");case 38:case 124:if(!a.bitwiseOperators)break;case 42:case 94:case 37:case 44:case 123:case 125:case 93:case 40:case 41:case 59:case 35:case 45:case 43:return Z(t.charAt(k))}return B(t.charAt(k))}function R(){var e=t.charCodeAt(k),n=t.charCodeAt(k+1);return!!Y(e)&&(10===e&&13===n&&++k,13===e&&10===n&&++k,++$,I=++k,!0)}function z(){for(;k<r;)if(9===(e=t.charCodeAt(k))||32===e||11===e||12===e)++k;else if(!R())break;var e}function Z(e){return k+=e.length,{type:g,value:e,line:$,lineStart:I,range:[N,k]}}function X(){var e=t.charAt(k),n=t.charAt(k+1),r="0"===e&&"xX".indexOf(n||null)>=0?function(){var e,n,r,a,o=0,s=1,i=1;for(a=k+=2,te(t.charCodeAt(k))||D(null,x.malformedNumber,t.slice(N,k));te(t.charCodeAt(k));)++k;e=parseInt(t.slice(a,k),16);var c=!1;if("."===t.charAt(k)){for(c=!0,n=++k;te(t.charCodeAt(k));)++k;o=t.slice(n,k),o=n===k?0:parseInt(o,16)/Math.pow(16,k-n)}var u=!1;if("pP".indexOf(t.charAt(k)||null)>=0){for(u=!0,++k,"+-".indexOf(t.charAt(k)||null)>=0&&(i="+"===t.charAt(k++)?1:-1),r=k,ee(t.charCodeAt(k))||D(null,x.malformedNumber,t.slice(N,k));ee(t.charCodeAt(k));)++k;s=t.slice(r,k),s=Math.pow(2,s*i)}return{value:(e+o)*s,hasFractionPart:c||u}}():function(){for(;ee(t.charCodeAt(k));)++k;var e=!1;if("."===t.charAt(k))for(e=!0,++k;ee(t.charCodeAt(k));)++k;var n=!1;if("eE".indexOf(t.charAt(k)||null)>=0)for(n=!0,++k,"+-".indexOf(t.charAt(k)||null)>=0&&++k,ee(t.charCodeAt(k))||D(null,x.malformedNumber,t.slice(N,k));ee(t.charCodeAt(k));)++k;return{value:parseFloat(t.slice(N,k)),hasFractionPart:e||n}}(),o=function(){if(a.imaginaryNumbers)return"iI".indexOf(t.charAt(k)||null)>=0&&(++k,!0)}();return function(){if(a.integerSuffixes)if("uU".indexOf(t.charAt(k)||null)>=0)if(++k,"lL".indexOf(t.charAt(k)||null)>=0){if(++k,"lL".indexOf(t.charAt(k)||null)>=0)return++k,"ULL";D(null,x.malformedNumber,t.slice(N,k))}else D(null,x.malformedNumber,t.slice(N,k));else if("lL".indexOf(t.charAt(k)||null)>=0){if(++k,"lL".indexOf(t.charAt(k)||null)>=0)return++k,"LL";D(null,x.malformedNumber,t.slice(N,k))}}()&&(o||r.hasFractionPart)&&D(null,x.malformedNumber,t.slice(N,k)),{type:d,value:r.value,line:$,lineStart:I,range:[N,k]}}function q(){var e=k;switch(t.charAt(k)){case"a":return++k,"";case"n":return++k,"\n";case"r":return++k,"\r";case"t":return++k,"\t";case"v":return++k,"\v";case"b":return++k,"\b";case"f":return++k,"\f";case"\r":case"\n":return R(),"\n";case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;ee(t.charCodeAt(k))&&k-e<3;)++k;var n=t.slice(e,k),r=parseInt(n,10);return r>255&&D(null,x.decimalEscapeTooLarge,"\\"+r),o.encodeByte(r,"\\"+n);case"z":if(a.skipWhitespaceEscape)return++k,z(),"";break;case"x":if(a.hexEscapes){if(te(t.charCodeAt(k+1))&&te(t.charCodeAt(k+2)))return k+=3,o.encodeByte(parseInt(t.slice(e+1,k),16),"\\"+t.slice(e,k));D(null,x.hexadecimalDigitExpected,"\\"+t.slice(e,k+2))}break;case"u":if(a.unicodeEscapes)return function(){var e=k++;for("{"!==t.charAt(k++)&&D(null,x.braceExpected,"{","\\"+t.slice(e,k)),te(t.charCodeAt(k))||D(null,x.hexadecimalDigitExpected,"\\"+t.slice(e,k));48===t.charCodeAt(k);)++k;for(var n=k;te(t.charCodeAt(k));)++k-n>6&&D(null,x.tooLargeCodepoint,"\\"+t.slice(e,k));var r=t.charAt(k++);"}"!==r&&('"'===r||"'"===r?D(null,x.braceExpected,"}","\\"+t.slice(e,k--)):D(null,x.hexadecimalDigitExpected,"\\"+t.slice(e,k)));var a=parseInt(t.slice(n,k-1)||"0",16),s="\\"+t.slice(e,k);return a>1114111&&D(null,x.tooLargeCodepoint,s),o.encodeUTF8(a,s)}();break;case"\\":case'"':case"'":return t.charAt(k++)}return a.strictEscapes&&D(null,x.invalidEscape,"\\"+t.slice(e,k+1)),t.charAt(k++)}function K(){N=k,k+=2;var e=t.charAt(k),a="",o=!1,s=k,i=I,c=$;if("["===e&&(!1===(a=W(!0))?a=e:o=!0),!o){for(;k<r&&!Y(t.charCodeAt(k));)++k;n.comments&&(a=t.slice(s,k))}if(n.comments){var u=y.comment(a,t.slice(N,k));n.locations&&(u.loc={start:{line:c,column:N-i},end:{line:$,column:k-I}}),n.ranges&&(u.range=[N,k]),n.onCreateNode&&n.onCreateNode(u),M.push(u)}}function W(e){var n,a=0,o="",s=!1,i=$;for(++k;"="===t.charAt(k+a);)++a;if("["!==t.charAt(k+a))return!1;for(k+=a+1,Y(t.charCodeAt(k))&&R(),n=k;k<r;){for(;Y(t.charCodeAt(k));)R();if("]"===t.charAt(k++)){s=!0;for(var c=0;c<a;++c)"="!==t.charAt(k+c)&&(s=!1);"]"!==t.charAt(k+a)&&(s=!1)}if(s)return o+=t.slice(n,k-1),k+=a+1,o}D(null,e?x.unfinishedLongComment:x.unfinishedLongString,i,"<eof>")}function J(){O=E,E=L,L=P()}function H(e){return e===E.value&&(J(),!0)}function Q(e){e===E.value?J():D(E,x.expected,e,U(E))}function Y(e){return 10===e||13===e}function ee(e){return e>=48&&e<=57}function te(e){return e>=48&&e<=57||e>=97&&e<=102||e>=65&&e<=70}function ne(e){return e>=65&&e<=90||e>=97&&e<=122||95===e||e>=48&&e<=57||!!(a.extendedIdentifiers&&e>=128)}function re(e){if(l===e.type)return!0;if(p!==e.type)return!1;switch(e.value){case"else":case"elseif":case"end":case"until":return!0;default:return!1}}function ae(){var e=V[F++].slice();V.push(e),n.onCreateScope&&n.onCreateScope()}function oe(){V.pop(),--F,n.onDestroyScope&&n.onDestroyScope()}function se(e){n.onLocalDeclaration&&n.onLocalDeclaration(e),-1===C(V[F],e)&&V[F].push(e)}function ie(e){se(e.name),ce(e,!0)}function ce(e,t){t||-1!==function(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===n)return r;return-1}(j,0,e.name)||j.push(e),e.isLocal=t}function ue(e){return-1!==C(V[F],e)}Object.assign&&(T=Object.assign),e.SyntaxError=SyntaxError,e.lex=P;var le,fe=[];function pe(){return new he(E)}function he(e){n.locations&&(this.loc={start:{line:e.line,column:e.range[0]-e.lineStart},end:{line:0,column:0}}),n.ranges&&(this.range=[e.range[0],0])}function de(){le&&fe.push(pe())}function ge(e){le&&fe.push(e)}function me(){this.scopes=[],this.pendingGotos=[]}function be(){this.level=0,this.loopLevels=[]}function ve(){return a.labels?new me:new be}function xe(e){for(var t,n=[];!re(E);){if("return"===E.value||!a.relaxedBreak&&"break"===E.value){n.push(ye(e));break}t=ye(e),H(";"),t&&n.push(t)}return n}function ye(e){if(de(),g===E.type&&H("::"))return function(e){var t=E,r=we();return n.scope&&(se("::"+t.value+"::"),ce(r,!0)),Q("::"),e.addLabel(t.value,t),S(y.labelStatement(r))}(e);if(!a.emptyStatement||!H(";")){if(e.raiseDeferredErrors(),p===E.type)switch(E.value){case"local":return J(),function(e){var t,r=O;if(h===E.type){var a=[],o=[];do{t=we(),a.push(t),e.addLocal(t.name,r)}while(H(","));if(H("="))do{var s=Ee(e);o.push(s)}while(H(","));if(n.scope)for(var i=0,c=a.length;i<c;++i)ie(a[i]);return S(y.localStatement(a,o))}if(H("function"))return t=we(),e.addLocal(t.name,r),n.scope&&(ie(t),ae()),Ce(t,!0);_("<name>",E)}(e);case"if":return J(),function(e){var t,r,a,o=[];for(le&&(a=fe[fe.length-1],fe.push(a)),t=Ee(e),Q("then"),n.scope&&ae(),e.pushScope(),r=xe(e),e.popScope(),n.scope&&oe(),o.push(S(y.ifClause(t,r))),le&&(a=pe());H("elseif");)ge(a),t=Ee(e),Q("then"),n.scope&&ae(),e.pushScope(),r=xe(e),e.popScope(),n.scope&&oe(),o.push(S(y.elseifClause(t,r))),le&&(a=pe());return H("else")&&(le&&(a=new he(O),fe.push(a)),n.scope&&ae(),e.pushScope(),r=xe(e),e.popScope(),n.scope&&oe(),o.push(S(y.elseClause(r)))),Q("end"),S(y.ifStatement(o))}(e);case"return":return J(),function(e){var t=[];if("end"!==E.value){var n=ke(e);for(null!=n&&t.push(n);H(",");)n=Ee(e),t.push(n);H(";")}return S(y.returnStatement(t))}(e);case"function":return J(),Ce(function(){var e,t,r;for(le&&(r=pe()),e=we(),n.scope&&(ce(e,ue(e.name)),ae());H(".");)ge(r),t=we(),e=S(y.memberExpression(e,".",t));return H(":")&&(ge(r),t=we(),e=S(y.memberExpression(e,":",t)),n.scope&&se("self")),e}());case"while":return J(),function(e){var t=Ee(e);Q("do"),n.scope&&ae(),e.pushScope(!0);var r=xe(e);return e.popScope(),n.scope&&oe(),Q("end"),S(y.whileStatement(t,r))}(e);case"for":return J(),function(e){var t,r=we();if(n.scope&&(ae(),ie(r)),H("=")){var a=Ee(e);Q(",");var o=Ee(e),s=H(",")?Ee(e):null;return Q("do"),e.pushScope(!0),t=xe(e),e.popScope(),Q("end"),n.scope&&oe(),S(y.forNumericStatement(r,a,o,s,t))}for(var i=[r];H(",");)r=we(),n.scope&&ie(r),i.push(r);Q("in");var c=[];do{var u=Ee(e);c.push(u)}while(H(","));return Q("do"),e.pushScope(!0),t=xe(e),e.popScope(),Q("end"),n.scope&&oe(),S(y.forGenericStatement(i,c,t))}(e);case"repeat":return J(),function(e){n.scope&&ae(),e.pushScope(!0);var t=xe(e);Q("until"),e.raiseDeferredErrors();var r=Ee(e);return e.popScope(),n.scope&&oe(),S(y.repeatStatement(r,t))}(e);case"break":return J(),e.isInLoop()||D(E,x.noLoopToBreak,E.value),S(y.breakStatement());case"do":return J(),function(e){n.scope&&ae(),e.pushScope();var t=xe(e);return e.popScope(),n.scope&&oe(),Q("end"),S(y.doStatement(t))}(e);case"goto":return J(),Se(e)}return a.contextualGoto&&E.type===h&&"goto"===E.value&&L.type===h&&"goto"!==L.value?(J(),Se(e)):(le&&fe.pop(),function(e){var t,r,a,o,s,i=[];for(le&&(r=pe());;){if(le&&(t=pe()),h===E.type)s=E.value,o=we(),n.scope&&ce(o,ue(s)),a=!0;else{if("("!==E.value)return B(E);J(),o=Ee(e),Q(")"),a=!1}e:for(;;){switch(f===E.type?'"':E.value){case".":case"[":a=!0;break;case":":case"(":case"{":case'"':a=null;break;default:break e}o=Me(o,t,e)}if(i.push(o),","!==E.value)break;if(!a)return B(E);J()}if(1===i.length&&null===a)return ge(t),S(y.callStatement(i[0]));if(!a)return B(E);Q("=");var c=[];do{c.push(Ee(e))}while(H(","));return ge(r),S(y.assignmentStatement(i,c))}(e))}le&&fe.pop()}function Se(e){var t=E.value,n=O,r=we();return e.addGoto(t,n),S(y.gotoStatement(r))}function we(){de();var e=E.value;return h!==E.type&&_("<name>",E),J(),S(y.identifier(e))}function Ce(e,t){var r=ve();r.pushScope();var a=[];if(Q("("),!H(")"))for(;;){if(h===E.type){var o=we();if(n.scope&&ie(o),a.push(o),H(","))continue}else v===E.type?(r.allowVararg=!0,a.push($e(r))):_("<name> or '...'",E);Q(")");break}var s=xe(r);return r.popScope(),Q("end"),n.scope&&oe(),t=t||!1,S(y.functionStatement(e,a,t,s))}function Ae(e){for(var t,n,r=[];;){if(de(),g===E.type&&H("["))t=Ee(e),Q("]"),Q("="),n=Ee(e),r.push(S(y.tableKey(t,n)));else if(h===E.type)"="===L.value?(t=we(),J(),n=Ee(e),r.push(S(y.tableKeyString(t,n)))):(n=Ee(e),r.push(S(y.tableValue(n))));else{if(null==(n=ke(e))){fe.pop();break}r.push(S(y.tableValue(n)))}if(!(",;".indexOf(E.value)>=0))break;J()}return Q("}"),S(y.tableConstructorExpression(r))}function ke(e){return Le(0,e)}function Ee(e){var t=ke(e);if(null!=t)return t;_("<expression>",E)}function Oe(e){var t=e.charCodeAt(0),n=e.length;if(1===n)switch(t){case 94:return 12;case 42:case 47:case 37:return 10;case 43:case 45:return 9;case 38:return 6;case 126:return 5;case 124:return 4;case 60:case 62:return 3}else if(2===n)switch(t){case 47:return 10;case 46:return 8;case 60:case 62:return"<<"===e||">>"===e?7:3;case 61:case 126:return 3;case 111:return 1}else if(97===t&&"and"===e)return 2;return 0}function Le(e,t){var r,a,o,s=E.value;if(le&&(a=pe()),function(e){return g===e.type?"#-~".indexOf(e.value)>=0:p===e.type&&"not"===e.value}(E)){de(),J();var i=Le(10,t);null==i&&_("<expression>",E),r=S(y.unaryExpression(s,i))}if(null==r&&null==(r=$e(t))&&(r=function(e){var t,r,a;if(le&&(a=pe()),h===E.type)r=E.value,t=we(),n.scope&&ce(t,ue(r));else{if(!H("("))return null;t=Ee(e),Q(")")}for(;;){var o=Me(t,a,e);if(null===o)break;t=o}return t}(t)),null==r)return null;for(;s=E.value,!(0===(o=g===E.type||p===E.type?Oe(s):0)||o<=e);){"^"!==s&&".."!==s||--o,J();var c=Le(o,t);null==c&&_("<expression>",E),le&&fe.push(a),r=S(y.binaryExpression(s,r,c))}return r}function Me(e,t,n){var r,a;if(g===E.type)switch(E.value){case"[":return ge(t),J(),r=Ee(n),Q("]"),S(y.indexExpression(e,r));case".":return ge(t),J(),a=we(),S(y.memberExpression(e,".",a));case":":return ge(t),J(),a=we(),e=S(y.memberExpression(e,":",a)),ge(t),Ne(e,n);case"(":case"{":return ge(t),Ne(e,n)}else if(f===E.type)return ge(t),Ne(e,n);return null}function Ne(e,t){if(g===E.type)switch(E.value){case"(":a.emptyStatement||E.line!==O.line&&D(null,x.ambiguousSyntax,E.value),J();var n=[],r=ke(t);for(null!=r&&n.push(r);H(",");)r=Ee(t),n.push(r);return Q(")"),S(y.callExpression(e,n));case"{":de(),J();var o=Ae(t);return S(y.tableCallExpression(e,o))}else if(f===E.type)return S(y.stringCallExpression(e,$e(t)));_("function arguments",E)}function $e(e){var r,a=f|d|m|b|v,o=E.value,s=E.type;if(le&&(r=pe()),s!==v||e.allowVararg||D(E,x.cannotUseVararg,E.value),s&a){ge(r);var i=t.slice(E.range[0],E.range[1]);return J(),S(y.literal(s,o,i))}return p===s&&"function"===o?(ge(r),J(),n.scope&&ae(),Ce(null)):H("{")?(ge(r),Ae(e)):void 0}he.prototype.complete=function(){n.locations&&(this.loc.end.line=O.lastLine||O.line,this.loc.end.column=O.range[1]-(O.lastLineStart||O.lineStart)),n.ranges&&(this.range[1]=O.range[1])},he.prototype.bless=function(e){if(this.loc){var t=this.loc;e.loc={start:{line:t.start.line,column:t.start.column},end:{line:t.end.line,column:t.end.column}}}this.range&&(e.range=[this.range[0],this.range[1]])},me.prototype.isInLoop=function(){for(var e=this.scopes.length;e-- >0;)if(this.scopes[e].isLoop)return!0;return!1},me.prototype.pushScope=function(e){var t={labels:{},locals:[],deferredGotos:[],isLoop:!!e};this.scopes.push(t)},me.prototype.popScope=function(){for(var e=0;e<this.pendingGotos.length;++e){var t=this.pendingGotos[e];t.maxDepth>=this.scopes.length&&--t.maxDepth<=0&&D(t.token,x.labelNotVisible,t.target)}this.scopes.pop()},me.prototype.addGoto=function(e,t){for(var n=[],r=0;r<this.scopes.length;++r){var a=this.scopes[r];if(n.push(a.locals.length),Object.prototype.hasOwnProperty.call(a.labels,e))return}this.pendingGotos.push({maxDepth:this.scopes.length,target:e,token:t,localCounts:n})},me.prototype.addLabel=function(e,t){var n=this.currentScope();if(Object.prototype.hasOwnProperty.call(n.labels,e))D(t,x.labelAlreadyDefined,e,n.labels[e].line);else{for(var r=[],a=0;a<this.pendingGotos.length;++a){var o=this.pendingGotos[a];o.maxDepth>=this.scopes.length&&o.target===e?o.localCounts[this.scopes.length-1]<n.locals.length&&n.deferredGotos.push(o):r.push(o)}this.pendingGotos=r}n.labels[e]={localCount:n.locals.length,line:t.line}},me.prototype.addLocal=function(e,t){this.currentScope().locals.push({name:e,token:t})},me.prototype.currentScope=function(){return this.scopes[this.scopes.length-1]},me.prototype.raiseDeferredErrors=function(){for(var e=this.currentScope(),t=e.deferredGotos,n=0;n<t.length;++n){var r=t[n];D(r.token,x.gotoJumpInLocalScope,r.target,e.locals[r.localCounts[this.scopes.length-1]].name)}},be.prototype.isInLoop=function(){return!!this.loopLevels.length},be.prototype.pushScope=function(e){++this.level,e&&this.loopLevels.push(this.level)},be.prototype.popScope=function(){var e=this.loopLevels,t=e.length;t&&e[t-1]===this.level&&e.pop(),--this.level},be.prototype.addGoto=be.prototype.addLabel=function(){throw new Error("This should never happen")},be.prototype.addLocal=be.prototype.raiseDeferredErrors=function(){},e.parse=function(i,c){if(void 0===c&&"object"==typeof i&&(c=i,i=void 0),c||(c={}),t=i||"",n=T({},s,c),k=0,$=1,I=0,r=t.length,V=[[]],F=0,j=[],fe=[],!Object.prototype.hasOwnProperty.call(Ie,n.luaVersion))throw new Error(A("Lua version '%1' not supported",n.luaVersion));if(a=T({},Ie[n.luaVersion]),void 0!==n.extendedIdentifiers&&(a.extendedIdentifiers=!!n.extendedIdentifiers),!Object.prototype.hasOwnProperty.call(u,n.encodingMode))throw new Error(A("Encoding mode '%1' not supported",n.encodingMode));return o=u[n.encodingMode],n.comments&&(M=[]),n.wait?e:Fe()};var Ie={5.1:{},5.2:{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,relaxedBreak:!0},5.3:{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,bitwiseOperators:!0,integerDivision:!0,relaxedBreak:!0},LuaJIT:{labels:!0,contextualGoto:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,imaginaryNumbers:!0,integerSuffixes:!0}};function Ve(n){return t+=String(n),r=t.length,e}function Fe(e){void 0!==e&&Ve(e),t&&"#!"===t.substr(0,2)&&(t=t.replace(/^.*/,(function(e){return e.replace(/./g," ")}))),r=t.length,le=n.locations||n.ranges,L=P();var a=function(){J(),de(),n.scope&&ae();var e=ve();e.allowVararg=!0,e.pushScope();var t=xe(e);return e.popScope(),n.scope&&oe(),l!==E.type&&B(E),le&&!t.length&&(O=E),S(y.chunk(t))}();if(n.comments&&(a.comments=M),n.scope&&(a.globals=j),fe.length>0)throw new Error("Location tracking failed. This is most likely a bug in luaparse");return a}e.write=Ve,e.end=Fe}))}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";const e=class{constructor(e,t,n){this.r=e,this.g=t,this.b=n}toString(){return"rgb("+this.r.toString()+" "+this.g.toString()+" "+this.b.toString()+")"}};n(183);var t={};var r=JSON.stringify;function a(){for(var e=new Array(arguments.length-1),n=0;n<e.length;++n)e[n]=arguments[n+1];return function(e,t){for(var n="",a=0,o=0,s=0,i="",c=0;c<e.length;++c){var u=e[c],l=u[0].charCodeAt(0);if(76!==l)if(37!==l){var f="",p=0,h=10,d=4,g=!1,m=u[3],b=m.indexOf("#")>-1;if(u[2])a=parseInt(u[2],10)-1;else if(109===l&&!b){n+="Success";continue}var v=0;u[4].length>0&&(v="*"!==u[4].charAt(0)?parseInt(u[4],10):1===u[4].length?t[o++]:t[parseInt(u[4].substr(1),10)-1]);var x=-1;u[5].length>0&&(x="*"!==u[5].charAt(0)?parseInt(u[5],10):1===u[5].length?t[o++]:t[parseInt(u[5].substr(1),10)-1]),u[2]||(a=o++);var y=t[a],S=u[6];switch(l){case 83:case 115:f=String(y),x>=0&&(f=f.substr(0,x)),(v>f.length||-v>f.length)&&((-1==m.indexOf("-")||v<0)&&-1!=m.indexOf("0")?f=(i=v-f.length>=0?"0".repeat(v-f.length):"")+f:(i=v-f.length>=0?" ".repeat(v-f.length):"",f=m.indexOf("-")>-1?f+i:i+f));break;case 67:case 99:switch(typeof y){case"number":var w=y;67==l||108===S.charCodeAt(0)?(w&=4294967295,f=String.fromCharCode(w)):(w&=255,f=String.fromCharCode(w));break;case"string":f=y.charAt(0);break;default:f=String(y).charAt(0)}(v>f.length||-v>f.length)&&((-1==m.indexOf("-")||v<0)&&-1!=m.indexOf("0")?f=(i=v-f.length>=0?"0".repeat(v-f.length):"")+f:(i=v-f.length>=0?" ".repeat(v-f.length):"",f=m.indexOf("-")>-1?f+i:i+f));break;case 68:d=8;case 100:case 105:p=-1,g=!0;break;case 85:d=8;case 117:p=-1;break;case 79:d=8;case 111:p=-1,h=8;break;case 120:p=-1,h=-16;break;case 88:p=-1,h=16;break;case 66:d=8;case 98:p=-1,h=2;break;case 70:case 102:p=1;break;case 69:case 101:p=2;break;case 71:case 103:p=3;break;case 65:case 97:p=4;break;case 112:s="number"==typeof y?y:y?Number(y.l):-1,isNaN(s)&&(s=-1),f=b?s.toString(10):"0x"+(s=Math.abs(s)).toString(16).toLowerCase();break;case 110:y&&(y.len=n.length);continue;case 109:f=y instanceof Error?y.message?y.message:y.errno?"Error number "+y.errno:"Error "+String(y):"Success";break;case 74:f=(b?r:JSON.stringify)(y);break;case 86:f=null==y?"null":String(y.valueOf());break;case 84:f=b?(f=Object.prototype.toString.call(y).substr(8)).substr(0,f.length-1):typeof y;break;case 89:case 121:f=y?b?"yes":"true":b?"no":"false",89==l&&(f=f.toUpperCase()),x>=0&&(f=f.substr(0,x)),(v>f.length||-v>f.length)&&((-1==m.indexOf("-")||v<0)&&-1!=m.indexOf("0")?f=(i=v-f.length>=0?"0".repeat(v-f.length):"")+f:(i=v-f.length>=0?" ".repeat(v-f.length):"",f=m.indexOf("-")>-1?f+i:i+f))}if(v<0&&(v=-v,m+="-"),-1==p){switch(s=Number(y),S){case"hh":d=1;break;case"h":d=2;break;case"l":case"L":case"q":case"ll":case"j":case"t":case"z":case"Z":case"I":4==d&&(d=8)}switch(d){case 1:s&=255,g&&s>127&&(s-=256);break;case 2:s&=65535,g&&s>32767&&(s-=65536);break;case 4:s=g?0|s:s>>>0;break;default:s=isNaN(s)?0:Math.round(s)}if(d>4&&s<0&&!g)if(16==h||-16==h)f=(s>>>0).toString(16),f=(16-(f=((s=Math.floor((s-(s>>>0))/Math.pow(2,32)))>>>0).toString(16)+(8-f.length>=0?"0".repeat(8-f.length):"")+f).length>=0?"f".repeat(16-f.length):"")+f,16==h&&(f=f.toUpperCase());else if(8==h)f=(10-(f=(s>>>0).toString(8)).length>=0?"0".repeat(10-f.length):"")+f,f="1"+(21-(f=(f=((s=Math.floor((s-(s>>>0&1073741823))/Math.pow(2,30)))>>>0).toString(8)+f.substr(f.length-10)).substr(f.length-20)).length>=0?"7".repeat(21-f.length):"")+f;else{s=-s%1e16;for(var C=[1,8,4,4,6,7,4,4,0,7,3,7,0,9,5,5,1,6,1,6],A=C.length-1;s>0;)(C[A]-=s%10)<0&&(C[A]+=10,C[A-1]--),--A,s=Math.floor(s/10);f=C.join("")}else f=-16===h?s.toString(16).toLowerCase():16===h?s.toString(16).toUpperCase():s.toString(h);if(0!==x||"0"!=f||8==h&&b){if(f.length<x+("-"==f.substr(0,1)?1:0)&&(f="-"!=f.substr(0,1)?(x-f.length>=0?"0".repeat(x-f.length):"")+f:f.substr(0,1)+(x+1-f.length>=0?"0".repeat(x+1-f.length):"")+f.substr(1)),!g&&b&&0!==s)switch(h){case-16:f="0x"+f;break;case 16:f="0X"+f;break;case 8:"0"!=f.charAt(0)&&(f="0"+f);break;case 2:f="0b"+f}}else f="";g&&"-"!=f.charAt(0)&&(m.indexOf("+")>-1?f="+"+f:m.indexOf(" ")>-1&&(f=" "+f)),v>0&&f.length<v&&(m.indexOf("-")>-1?f+=v-f.length>=0?" ".repeat(v-f.length):"":m.indexOf("0")>-1&&x<0&&f.length>0?(x>f.length&&(f=(x-f.length>=0?"0".repeat(x-f.length):"")+f),i=v-f.length>=0?(x>0?" ":"0").repeat(v-f.length):"",f=f.charCodeAt(0)<48?"x"==f.charAt(2).toLowerCase()?f.substr(0,3)+i+f.substring(3):f.substr(0,1)+i+f.substring(1):"x"==f.charAt(1).toLowerCase()?f.substr(0,2)+i+f.substring(2):i+f):f=(v-f.length>=0?" ".repeat(v-f.length):"")+f)}else if(p>0){s=Number(y),null===y&&(s=NaN),"L"==S&&(d=12);var k=isFinite(s);if(k){var E=0;-1==x&&4!=p&&(x=6),3==p&&(0===x&&(x=1),x>(E=+(f=s.toExponential(1)).substr(f.indexOf("e")+1))&&E>=-4?(p=11,x-=E+1):(p=12,x-=1));var O=s<0||1/s==-1/0?"-":"";switch(s<0&&(s=-s),p){case 1:case 11:if(s<1e21){f=s.toFixed(x),1==p?0===x&&b&&-1==f.indexOf(".")&&(f+="."):b?-1==f.indexOf(".")&&(f+="."):f=f.replace(/(\.\d*[1-9])0*$/,"$1").replace(/\.0*$/,"");break}E=+(f=s.toExponential(20)).substr(f.indexOf("e")+1),f=f.charAt(0)+f.substr(2,f.indexOf("e")-2),f+=E-f.length+1>=0?"0".repeat(E-f.length+1):"",(b||x>0&&11!==p)&&(f=f+"."+(x>=0?"0".repeat(x):""));break;case 2:case 12:E=(f=s.toExponential(x)).indexOf("e"),f.length-E==3&&(f=f.substr(0,E+2)+"0"+f.substr(E+2)),b&&-1==f.indexOf(".")?f=f.substr(0,E)+"."+f.substr(E):b||12!=p||(f=f.replace(/\.0*e/,"e").replace(/\.(\d*[1-9])0*e/,".$1e"));break;case 4:if(0===s){f="0x0"+(b||x>0?"."+(x>=0?"0".repeat(x):""):"")+"p+0";break}var L=(f=s.toString(16)).charCodeAt(0);if(48==L){for(L=2,E=-4,s*=16;48==f.charCodeAt(L++);)E-=4,s*=16;L=(f=s.toString(16)).charCodeAt(0)}var M=f.indexOf(".");if(f.indexOf("(")>-1){var N=f.match(/\(e(.*)\)/),$=N?+N[1]:0;E+=4*$,s/=Math.pow(16,$)}else M>1?(E+=4*(M-1),s/=Math.pow(16,M-1)):-1==M&&(E+=4*(f.length-1),s/=Math.pow(16,f.length-1));if(d>8?L<50?(E-=3,s*=8):L<52?(E-=2,s*=4):L<56&&(E-=1,s*=2):L>=56?(E+=3,s/=8):L>=52?(E+=2,s/=4):L>=50&&(E+=1,s/=2),(f=s.toString(16)).length>1){if(f.length>x+2&&f.charCodeAt(x+2)>=56){var I=102==f.charCodeAt(0);f=(s+8*Math.pow(16,-x-1)).toString(16),I&&49==f.charCodeAt(0)&&(E+=4)}x>0?(f=f.substr(0,x+2)).length<x+2&&(f.charCodeAt(0)<48?f=f.charAt(0)+(x+2-f.length>=0?"0".repeat(x+2-f.length):"")+f.substr(1):f+=x+2-f.length>=0?"0".repeat(x+2-f.length):""):0===x&&(f=f.charAt(0)+(b?".":""))}else x>0?f=f+"."+(x>=0?"0".repeat(x):""):b&&(f+=".");f="0x"+f+"p"+(E>=0?"+"+E:E)}""===O&&(m.indexOf("+")>-1?O="+":m.indexOf(" ")>-1&&(O=" ")),f=O+f}else s<0?f="-":m.indexOf("+")>-1?f="+":m.indexOf(" ")>-1&&(f=" "),f+=isNaN(s)?"nan":"inf";v>f.length&&(m.indexOf("-")>-1?f+=v-f.length>=0?" ".repeat(v-f.length):"":m.indexOf("0")>-1&&f.length>0&&k?(i=v-f.length>=0?"0".repeat(v-f.length):"",f=f.charCodeAt(0)<48?"x"==f.charAt(2).toLowerCase()?f.substr(0,3)+i+f.substring(3):f.substr(0,1)+i+f.substring(1):"x"==f.charAt(1).toLowerCase()?f.substr(0,2)+i+f.substring(2):i+f):f=(v-f.length>=0?" ".repeat(v-f.length):"")+f),l<96&&(f=f.toUpperCase())}n+=f}else n+="%";else n+=u[1]}return n}(function(e){if(t[e])return t[e];for(var n=[],r=0,a=0,o=!1,s="",i="",c="",u="",l="",f=0,p=e.length;a<p;++a)if(f=e.charCodeAt(a),o)if(f>=48&&f<58)u.length?u+=String.fromCharCode(f):48!=f||c.length?c+=String.fromCharCode(f):i+=String.fromCharCode(f);else switch(f){case 36:u.length?u+="$":"*"==c.charAt(0)?c+="$":(s=c+"$",c="");break;case 39:i+="'";break;case 45:i+="-";break;case 43:i+="+";break;case 32:i+=" ";break;case 35:i+="#";break;case 46:u=".";break;case 42:"."==u.charAt(0)?u+="*":c+="*";break;case 104:case 108:if(l.length>1)throw"bad length "+l+String(f);l+=String.fromCharCode(f);break;case 76:case 106:case 122:case 116:case 113:case 90:case 119:if(""!==l)throw"bad length "+l+String.fromCharCode(f);l=String.fromCharCode(f);break;case 73:if(""!==l)throw"bad length "+l+"I";l="I";break;case 100:case 105:case 111:case 117:case 120:case 88:case 102:case 70:case 101:case 69:case 103:case 71:case 97:case 65:case 99:case 67:case 115:case 83:case 112:case 110:case 68:case 85:case 79:case 109:case 98:case 66:case 121:case 89:case 74:case 86:case 84:case 37:o=!1,u.length>1&&(u=u.substr(1)),n.push([String.fromCharCode(f),e.substring(r,a+1),s,i,c,u,l]),r=a+1,l=u=c=i=s="";break;default:throw new Error("Invalid format string starting with |"+e.substring(r,a+1)+"|")}else{if(37!==f)continue;r<a&&n.push(["L",e.substring(r,a)]),r=a,o=!0}return r<e.length&&n.push(["L",e.substring(r)]),t[e]=n}(arguments[0]),e)}class o extends Error{constructor(e){super(),this.message=e}toString(){return`LuaError: ${this.message}`}}class s{constructor(e){if(this.numValues=[void 0],this.strValues={},this.keys=[],this.values=[],this.metatable=null,void 0!==e)if("function"!=typeof e){if(Array.isArray(e))this.insert(...e);else for(const t in e)if(x(e,t)){let n=e[t];null===n&&(n=void 0),this.set(t,n)}}else e(this)}get(e){const t=this.rawget(e);if(void 0===t&&this.metatable){const t=this.metatable.get("__index");if(t instanceof s)return t.get(e);if("function"==typeof t){const n=t.call(void 0,this,e);return n instanceof Array?n[0]:n}}return t}rawget(e){switch(typeof e){case"string":if(x(this.strValues,e))return this.strValues[e];break;case"number":if(e>0&&e%1==0)return this.numValues[e]}const t=this.keys.indexOf(l(e));return-1===t?void 0:this.values[t]}getMetaMethod(e){return this.metatable&&this.metatable.rawget(e)}set(e,t){const n=this.metatable&&this.metatable.get("__newindex");if(n&&void 0===this.rawget(e)){if(n instanceof s)return n.set(e,t);if("function"==typeof n)return n(this,e,t)}this.rawset(e,t)}setFn(e){return t=>this.set(e,t)}rawset(e,t){switch(typeof e){case"string":return void(this.strValues[e]=t);case"number":if(e>0&&e%1==0)return void(this.numValues[e]=t)}const n=l(e),r=this.keys.indexOf(n);r>-1?this.values[r]=t:(this.values[this.keys.length]=t,this.keys.push(n))}insert(...e){this.numValues.push(...e)}toObject(){const e=0===Object.keys(this.strValues).length&&this.getn()>0,t=e?[]:{};for(let n=1;n<this.numValues.length;n++){const r=this.numValues[n],a=r instanceof s?r.toObject():r;e?t[n-1]=a:t[String(n-1)]=a}for(const e in this.strValues)if(x(this.strValues,e)){const n=this.strValues[e],r=n instanceof s?n.toObject():n;t[e]=r}return t}getn(){const e=this.numValues,t=[];for(const n in e)x(e,n)&&(t[n]=!0);let n=0;for(;t[n+1];)n+=1;if(n>0&&void 0===e[n]){let t=0;for(;n-t>1;){const r=Math.floor((t+n)/2);void 0===e[r]?n=r:t=r}return t}return n}}const i=/^[-+]?[0-9]*\.?([0-9]+([eE][-+]?[0-9]+)?)?$/,c=/^(-)?0x([0-9a-fA-F]*)\.?([0-9a-fA-F]*)$/;function u(e){const t=typeof e;switch(t){case"undefined":return"nil";case"number":case"string":case"boolean":case"function":return t;case"object":if(e instanceof s)return"table";if(e instanceof Function)return"function"}}function l(e){if(e instanceof s){const n=e.getMetaMethod("__tostring");return n?n(e)[0]:t(e,"table: 0x")}return e instanceof Function?t(e,"function: 0x"):d(e);function t(e,t){const n=e.toString();if(n.indexOf(t)>-1)return n;const r=t+Math.floor(4294967295*Math.random()).toString(16);return e.toString=()=>r,r}}function f(e,t){return e>=0?e:-e>t?0:t+e+1}function p(e,t){if(t)throw new o(`${t}`.replace(/%type/gi,u(e)))}function h(e,t){if("number"==typeof e)return e;switch(e){case void 0:return;case"inf":return 1/0;case"-inf":return-1/0;case"nan":return NaN}const n=`${e}`;if(n.match(i))return parseFloat(n);const r=n.match(c);if(r){const[,e,t,n]=r;let a=parseInt(t,16)||0;return n&&(a+=parseInt(n,16)/Math.pow(16,n.length)),e&&(a*=-1),a}void 0!==t&&p(e,t)}function d(e,t){if("string"==typeof e)return e;switch(e){case void 0:case null:return"nil";case 1/0:return"inf";case-1/0:return"-inf"}return"number"==typeof e?Number.isNaN(e)?"nan":`${e}`:"boolean"==typeof e?`${e}`:void 0===t?"nil":void p(e,t)}function g(e,t,n,r,a){return t(e,`bad argument #${a} to '${r}' (${n} expected, got %type)`)}function m(e,t,n){return g(e,h,"number",t,n)}function b(e,t,n){return g(e,d,"string",t,n)}function v(e,t,n){if(e instanceof s)return e;{const r=u(e);throw new o(`bad argument #${n} to '${t}' (table expected, got ${r})`)}}const x=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);new Map,new Map,new Map,new Map;const y={"([^a-zA-Z0-9%(])-":"$1*?","([^%])-([^a-zA-Z0-9?])":"$1*?$2","([^%])\\.":"$1[\\s\\S]","(.)-$":"$1*?","%a":"[a-zA-Z]","%A":"[^a-zA-Z]","%c":"[\0-]","%C":"[^\0-]","%d":"\\d","%D":"[^d]","%l":"[a-z]","%L":"[^a-z]","%p":"[.,\"'?!;:#$%&()*+-/<>=@\\[\\]\\\\^_{}|~]","%P":"[^.,\"'?!;:#$%&()*+-/<>=@\\[\\]\\\\^_{}|~]","%s":"[ \\t\\n\\f\\v\\r]","%S":"[^ \t\n\f\v\r]","%u":"[A-Z]","%U":"[^A-Z]","%w":"[a-zA-Z0-9]","%W":"[^a-zA-Z0-9]","%x":"[a-fA-F0-9]","%X":"[^a-fA-F0-9]","%([^a-zA-Z])":"\\$1"};function S(e){let t=e.replace(/\\/g,"\\\\");for(const e in y)x(y,e)&&(t=t.replace(new RegExp(e,"g"),y[e]));let n=0;for(let e=0,r=t.length;e<r;e++){if(e&&"\\"===t.substr(e-1,1))continue;const a=t.substr(e,1);"["!==a&&"]"!==a||("]"===a&&(n-=1),n>0&&(t=t.substr(0,e)+t.substr(e+1),e-=1,r-=1),"["===a&&(n+=1))}return t}const w=new s({byte:function(e,t,n){const r=b(e,"byte",1),a=void 0===t?1:m(t,"byte",2),o=void 0===n?a:m(n,"byte",3);return r.substring(a-1,o).split("").map((e=>e.charCodeAt(0)))},char:function(...e){return e.map(((e,t)=>{const n=m(e,"char",t);return String.fromCharCode(n)})).join("")},find:function(e,t,n,r){const a=b(e,"find",1),o=b(t,"find",2),s=void 0===n?1:m(n,"find",3);if(void 0===r||!m(r,"find",4)){const e=new RegExp(S(o)),t=a.substr(s-1).search(e);if(t<0)return;const n=a.substr(s-1).match(e),r=[t+s,t+s+n[0].length-1];return n.shift(),[...r,...n]}const i=a.indexOf(o,s-1);return-1===i?void 0:[i+1,i+o.length]},format:function(e,...t){let n=-1;return e.replace(/%%|%([-+ #0]*)?(\d*)?(?:\.(\d*))?(.)/g,((e,r,s,i,c)=>{if("%%"===e)return"%";if(!c.match(/[AEGXacdefgioqsux]/))throw new o(`invalid option '%${e}' to 'format'`);if(r&&r.length>5)throw new o("invalid format (repeated flags)");if(s&&s.length>2)throw new o("invalid format (width too long)");if(i&&i.length>2)throw new o("invalid format (precision too long)");n+=1;const u=t[n];if(void 0===u)throw new o(`bad argument #${n} to 'format' (no value)`);return/A|a|E|e|f|G|g/.test(c)||/c|d|i|o|u|X|x/.test(c)?a(e,m(u,"format",n)):"q"===c?`"${u.replace(/([\n"])/g,"\\$1")}"`:a(e,"s"===c?l(u):u)}))},gmatch:function(e,t){const n=b(e,"gmatch",1),r=S(b(t,"gmatch",2)),a=new RegExp(r,"g"),o=n.match(a);return()=>{const e=o.shift();if(void 0===e)return[];const t=new RegExp(r).exec(e);return t.shift(),t.length?t:[e]}},gsub:function(e,t,n,r){let a=b(e,"gsub",1);const o=void 0===r?1/0:m(r,"gsub",3),i=S(b(t,"gsub",2)),c="function"==typeof n?e=>{const t=n(e[0])[0];return void 0===t?e[0]:t}:n instanceof s?e=>n.get(e[0]).toString():e=>`${n}`.replace(/%([0-9])/g,((t,n)=>e[n]));let u,l,f="",p=0;for(;p<o&&a&&(u=a.match(i));){const e=u[0].length>0?a.substr(0,u.index):void 0===l?"":a.substr(0,1);l=u[0],f+=`${e}${c(u)}`,a=a.substr(`${e}${l}`.length),p+=1}return`${f}${a}`},len:function(e){return b(e,"len",1).length},lower:function(e){return b(e,"lower",1).toLowerCase()},match:function(e,t,n=0){let r=b(e,"match",1);const a=b(t,"match",2),o=m(n,"match",3);r=r.substr(o);const s=r.match(new RegExp(S(a)));if(s)return s[1]?(s.shift(),s):s[0]},rep:function(e,t,n){const r=b(e,"rep",1),a=m(t,"rep",2),o=void 0===n?"":b(n,"rep",3);return Array(a).fill(r).join(o)},reverse:function(e){return b(e,"reverse",1).split("").reverse().join("")},sub:function(e,t=1,n=-1){const r=b(e,"sub",1);let a=f(m(t,"sub",2),r.length),o=f(m(n,"sub",3),r.length);return a<1&&(a=1),o>r.length&&(o=r.length),a<=o?r.substr(a-1,o-a+1):""},upper:function(e){return b(e,"upper",1).toUpperCase()}}),C=new s({__index:w}),A=Number.MAX_SAFE_INTEGER,k=Number.MIN_SAFE_INTEGER,E=Math.PI;let O=1;function L(){return O=16807*O%2147483647,O/2147483647}function M(e,t){const n=m(e,"atan",1),r=void 0===t?1:m(t,"atan",2);return Math.atan2(n,r)}function N(e){const t=m(e,"exp",1);return Math.exp(t)}function $(e){const t=h(e);if(void 0!==t)return Math.floor(t)}function I(e){return v(e,"maxn",1).numValues.length-1}new s({abs:function(e){const t=m(e,"abs",1);return Math.abs(t)},acos:function(e){const t=m(e,"acos",1);return Math.acos(t)},asin:function(e){const t=m(e,"asin",1);return Math.asin(t)},atan:M,atan2:function(e,t){return M(e,t)},ceil:function(e){const t=m(e,"ceil",1);return Math.ceil(t)},cos:function(e){const t=m(e,"cos",1);return Math.cos(t)},cosh:function(e){const t=m(e,"cosh",1);return(N(t)+N(-t))/2},deg:function(e){return 180*m(e,"deg",1)/Math.PI},exp:N,floor:function(e){const t=m(e,"floor",1);return Math.floor(t)},fmod:function(e,t){return m(e,"fmod",1)%m(t,"fmod",2)},frexp:function(e){let t=m(e,"frexp",1);if(0===t)return[0,0];const n=t>0?1:-1;t*=n;const r=Math.floor(Math.log(t)/Math.log(2))+1;return[t/Math.pow(2,r)*n,r]},huge:1/0,ldexp:function(e,t){const n=m(e,"ldexp",1),r=m(t,"ldexp",2);return n*Math.pow(2,r)},log:function(e,t){const n=m(e,"log",1);if(void 0===t)return Math.log(n);{const e=m(t,"log",2);return Math.log(n)/Math.log(e)}},log10:function(e){const t=m(e,"log10",1);return Math.log(t)/Math.log(10)},max:function(...e){const t=e.map(((e,t)=>m(e,"max",t+1)));return Math.max(...t)},min:function(...e){const t=e.map(((e,t)=>m(e,"min",t+1)));return Math.min(...t)},maxinteger:A,mininteger:k,modf:function(e){const t=m(e,"modf",1),n=Math.floor(t);return[n,t-n]},pi:E,pow:function(e,t){const n=m(e,"pow",1),r=m(t,"pow",2);return Math.pow(n,r)},rad:function(e){const t=m(e,"rad",1);return Math.PI/180*t},random:function(e,t){if(void 0===e&&void 0===t)return L();const n=m(e,"random",1),r=void 0!==t?n:1,a=void 0!==t?m(t,"random",2):n;if(r>a)throw new Error("bad argument #2 to 'random' (interval is empty)");return Math.floor(L()*(a-r+1)+r)},randomseed:function(e){O=m(e,"randomseed",1)},sin:function(e){const t=m(e,"sin",1);return Math.sin(t)},sinh:function(e){const t=m(e,"sinh",1);return(N(t)-N(-t))/2},sqrt:function(e){const t=m(e,"sqrt",1);return Math.sqrt(t)},tan:function(e){const t=m(e,"tan",1);return Math.tan(t)},tanh:function(e){const t=m(e,"tanh",1);return(N(t)-N(-t))/(N(t)+N(-t))},tointeger:$,type:function(e){const t=h(e);if(void 0!==t)return $(t)===t?"integer":"float"},ult:function(e,t){const n=m(e,"ult",1),r=m(t,"ult",2),a=e=>e>>>0;return a(n)<a(r)}}),new s({getn:function(e){return v(e,"getn",1).getn()},concat:function(e,t="",n=1,r){const a=v(e,"concat",1),o=b(t,"concat",2),s=m(n,"concat",3),i=void 0===r?I(a):m(r,"concat",4);return[].concat(a.numValues).splice(s,i-s+1).join(o)},insert:function(e,t,n){const r=v(e,"insert",1),a=void 0===n?r.numValues.length:m(t,"insert",2),o=void 0===n?t:n;r.numValues.splice(a,0,void 0),r.set(a,o)},maxn:I,move:function(e,t,n,r,a){const s=v(e,"move",1),i=m(t,"move",2),c=m(n,"move",3),u=m(r,"move",4),l=void 0===a?s:v(a,"move",5);if(c>=i){if(i<=0&&c>=Number.MAX_SAFE_INTEGER+i)throw new o("too many elements to move");const e=c-i+1;if(u>Number.MAX_SAFE_INTEGER-e+1)throw new o("destination wrap around");if(u>c||u<=i||l!==s)for(let t=0;t<e;t++){const e=s.get(i+t);l.set(u+t,e)}else for(let t=e-1;t>=0;t--){const e=s.get(i+t);l.set(u+t,e)}}return l},pack:function(...e){const t=new s(e);return t.rawset("n",e.length),t},remove:function(e,t){const n=v(e,"remove",1),r=n.getn(),a=void 0===t?r:m(t,"remove",2);if(a>r||a<0)return;const o=n.numValues,s=o.splice(a,1)[0];let i=a;for(;i<r&&void 0===o[i];)delete o[i],i+=1;return s},sort:function(e,t){const n=v(e,"sort",1);let r;if(t){const e=function(e,t,n){if(e instanceof Function)return e;{const r=u(e);throw new o(`bad argument #${n} to '${t}' (function expected, got ${r})`)}}(t,"sort",2);r=(t,n)=>{return!1!==(r=e(t,n)[0])&&void 0!==r?-1:1;var r}}else r=(e,t)=>e<t?-1:1;const a=n.numValues;a.shift(),a.sort(r).unshift(void 0)},unpack:function(e,t,n){const r=v(e,"unpack",1),a=void 0===t?1:m(t,"unpack",2),o=void 0===n?r.getn():m(n,"unpack",3);return r.numValues.slice(a,o+1)}});(new s).metatable=C;var V=document.createElement("canvas"),F=V.getContext("2d");V.width=720,V.height=540,T(0,0,0);var j=[];for(let e=0;e<180;e++){j[e]=[];for(let t=0;t<240;t++)j[e][t]=T(0,0,0)}function T(t,n,r){return new e(t,n,r)}window.onload=()=>{console.log("Hello World"),document.body.insertBefore(V,document.body.childNodes[0]),setInterval(function(){F.clearRect(0,0,V.width,V.height);for(let e=0;e<180;e++)for(let t=0;t<240;t++)F.fillStyle=j[e][t].toString(),F.fillRect(3*t,3*e,3,3)}(),1e3/60),console.log("interval set")}})()})();</script></head><body></body></html>